(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{18618:function(e,l,i){"use strict";var t=i(9268),s=i(17004),o=i(99362),a=i(24441),n=i(43749),d=i(91330),r=i(78962),u=i(59683),c=i.n(u),v=i(86006),h=i(32574),g=i(57321),p=i(72953),_=i(76185),m=i(77672),b=i(86029),x=i(56008),y=i(82805),j=i(48817),k=i(89133),f=i(58386),N=i(72326),C=i(72261),S=i(91142);l.Z=e=>{var l,i,u,D,T,M,Z,E,P,w,B,F,L,A,I,V,O,U,q,Q,R,K,$,z,G,H,W,Y,X,J,ee,el,ei,et,es,eo,ea,en;let ed,{tradeDataMap:er,optionDashboardRows:eu,pageTitle:ec,actionType:ev,alerts:eh,editOrderId:eg,showUnderlyingSec:ep,netTitle:e_,minValueOfData:em,coveredValue:eb=100,handleClose:ex}=e,ey=(0,g.T)(),ej=(0,x.useRouter)(),[ek,ef]=(0,v.useState)(!1),[eN,eC]=(0,v.useState)([]),[eS,eD]=(0,v.useState)([]),eT=(0,g.C)(h.iS),eM=(0,g.C)(e=>e.allStrategies.strategies),eZ=(0,g.C)(f.uo),eE=(0,g.C)(b._g);(0,g.C)(m.vR),(0,g.C)(m.T1);let eP=(0,g.C)(y.wI),[ew,eB]=(0,v.useState)([]),[eF,eL]=(0,v.useState)([]),[eA,eI]=(0,v.useState)([]),[eV,eO]=(0,v.useState)(""),[eU,eq]=(0,v.useState)(""),[eQ,eR]=(0,v.useState)(!1),[eK,e$]=(0,v.useState)([]),[ez,eG]=(0,v.useState)(!1),[eH,eW]=(0,v.useState)([{last:0}]),[eY,eX]=(0,v.useState)(!1),[eJ,e0]=(0,v.useState)("Add Underlying"),[e1,e2]=(0,v.useState)("Net Credit"===e_?"Estimated Credit:":"Estimated Debit:"),[e3,e4]=(0,v.useState)(null),[e6,e8]=(0,v.useState)(null),e9=[{value:"option",label:"option"},{value:"multileg",label:"multileg"},{value:"combo",label:"combo"}],e7=[{value:"market",label:"Market"},{value:"limit",label:"Limit"},{value:"stop",label:"Stop"},{value:"stop_limit",label:"Stop Limit"}],e5=[{value:"market",label:"Market"},{value:"debit",label:"Debit"},{value:"credit",label:"Credit"},{value:"even",label:"Even"}],le=[{value:"day",label:"Day"},{value:"gtc",label:"GTC"},{value:"pre",label:"Pre"},{value:"post",label:"Post"}],ll=[{value:"put",label:"Put"},{value:"call",label:"Call"}],li=[{value:"buy_to_open",label:"Buy to Open"},{value:"sell_to_open",label:"Sell to Open"},{value:"sell_to_close",label:"Sell to Close"},{value:"buy_to_close",label:"Buy to Close"}],lt=[{value:"buy",label:"Buy"},{value:"sell",label:"Sell"}],[ls,lo]=(0,v.useState)(ep?eb:0),[la,ln]=(0,v.useState)(null),[ld,lr]=(0,v.useState)(null),[lu,lc]=(0,v.useState)(null),[lv,lh]=(0,v.useState)(""),[lg,lp]=(0,v.useState)(li.map(e=>e.value)),[l_,lm]=(0,v.useState)(le[0].value),[lb,lx]=(0,v.useState)(e7[0].value),[ly,lj]=(0,v.useState)(e5[0].value),[lk,lf]=(0,v.useState)(lt[0].value),[lN,lC]=(0,v.useState)(null),[lS,lD]=(0,v.useState)([]),[lT,lM]=(0,v.useState)(null),[lZ,lE]=(0,v.useState)(null);(0,v.useEffect)(()=>{(null==eN?void 0:eN.length)>1||ls&&eY?(lj(e5[0].value),lx("")):(null==eN?void 0:eN.length)!==1&&(ls||eY)||(lx(e7[0].value),lj(""))},[null==eN?void 0:eN.length,eY,ls]),(0,v.useEffect)(()=>{if(eM){var e;let l=(null==eM?void 0:null===(e=eM.legs)||void 0===e?void 0:e.map(e=>null==e?void 0:e.size))||[];lB(l)}},[eM]);let lP=Array(eN&&(null==eN?void 0:eN.length)).fill(1),[lw,lB]=(0,v.useState)(lP),[lF,lL]=(0,v.useState)(lP),lA=async function(e){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={...eS},t=e.map(async t=>{let s=null==t?void 0:t.expiration_date,o=await lV(s,e,l);i[s]=lO(o);let a=lU(o,t);return{...t,...a}}),s=await Promise.all(t);eC(s),eD(i)},lI=(e,l)=>"buy_to_close"===l||"buy_to_open"===l?1:-1,lV=async function(e,l){var i,t,s;let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=eZ.find(l=>l.hasOwnProperty(e)),n=[];if(a&&a[e]&&!o)n=null!==(i=a[e])&&void 0!==i?i:[];else{let i=await ey((0,f.TH)({searchKey:(null===(t=l[0])||void 0===t?void 0:t.root_symbol)||(null==eM?void 0:eM.ticker),expiration:e}));n=null==i?void 0:null===(s=i.payload)||void 0===s?void 0:s.data}return n},lO=e=>{var l;let i=(null==e?void 0:null===(l=e.map)||void 0===l?void 0:l.call(e,e=>null==e?void 0:e.strike))||[];return i.reduce((e,l)=>(e.includes(l)||e.push(l),e),[])},lU=(e,l)=>{let i=null==e?void 0:e.find(e=>e.strike==l.strike&&e.option_type===l.option_type);if(void 0===i)return{strike:"Strike",mid:0,bid:0,ask:0,symbol:null==i?void 0:i.symbol};{let e=((null==i?void 0:i.ask)+(null==i?void 0:i.bid))/2;return{mid:e,bid:null==i?void 0:i.bid,ask:null==i?void 0:i.ask,symbol:null==i?void 0:i.symbol}}};(0,v.useEffect)(()=>{if("dashboard"===ec&&eu.length){var e,l,i;let t;let s=[];t=eu.map((e,l)=>{let i,t,o=e.quantity>0?1:-1,a=(e.ask+e.bid)/2,n="",d=null,r=null==e?void 0:e.expiration_date;if(s.push(Math.abs(e.quantity)),"close"===ev)i=1===o&&"buy_to_open"===lg[0]?"sell_to_close":-1===o&&"sell_to_open"===lg[1]?"buy_to_close":-1===o&&"sell_to_close"===lg[2]?"buy_to_close":1===o&&"buy_to_close"===lg[3]?"sell_to_close":"";else if("roll_over"===ev){var u;n=1===o&&"buy_to_open"===lg[0]?"sell_to_close":-1===o&&"sell_to_open"===lg[1]?"buy_to_close":-1===o&&"sell_to_close"===lg[2]?"buy_to_close":1===o&&"buy_to_close"===lg[3]?"sell_to_close":"",i=1===o&&"buy_to_open"===lg[0]?"buy_to_open":-1===o&&"sell_to_open"===lg[1]?"sell_to_open":-1===o&&"sell_to_close"===lg[2]?"sell_to_close":1===o&&"buy_to_close"===lg[3]?"buy_to_close":"",null==eP||null===(u=eP.date)||void 0===u||u.map((l,i)=>{e.expiration_date===l?d=i+1:e.expiration_date||(d=1),d===i&&(r=l)}),t=e.expiration_date}else"editOrder"===ev?(i=e.side,r=e.expiration_date,o=["buy_to_open","buy_to_close"].includes(e.side)?1:-1):i=1===o&&"buy_to_open"===lg[0]?"buy_to_open":-1===o&&"sell_to_open"===lg[1]?"sell_to_open":-1===o&&"sell_to_close"===lg[2]?"sell_to_close":1===o&&"buy_to_close"===lg[3]?"buy_to_close":"";return ev?{...e,direction:o,mid:a.toFixed(2),sides:i,sidesRollover:n,expiration_date:r,old_symbol:e.symbol,old_option_symbol:e.symbol,old_optionType:e.optionType,old_expiration_date:t,old_strike:e.strike,old_ask:e.ask,old_bid:e.bid,old_mid:a.toFixed(2),old_sides:i,old_option_type:null==e?void 0:e.option_type,old_quantity:null==e?void 0:e.quantity}:{...e,direction:o,mid:a.toFixed(2),sides:i}}),er.length>0&&"roll_over"!==ev&&lo(er[0].quantity),lB(s),lL(s),lA(t,!0),eC(t),ey((0,b.AP)(null===(e=t[0])||void 0===e?void 0:e.ticker)),ey((0,p.lP)({searchKey:null===(l=t[0])||void 0===l?void 0:l.ticker,expiration:null===(i=t[0])||void 0===i?void 0:i.expiration_date}))}},[eu,eP,ev]),(0,v.useEffect)(()=>{if("dashboard"===ec&&eu.length){var e;ey((0,y.Tu)(null===(e=eu[0])||void 0===e?void 0:e.ticker))}},[ec,eu,ey]);let lq=e=>1===e.direction&&"buy_to_open"===lg[0]?"buy_to_open":-1===e.direction&&"sell_to_open"===lg[1]?"sell_to_open":-1===e.direction&&"sell_to_close"===lg[2]?"sell_to_close":1===e.direction&&"buy_to_close"===lg[3]?"buy_to_close":"";(0,v.useEffect)(()=>{if(eM&&(null==eM?void 0:eM.legs)&&"dashboard"!==ec){let e=[];null==eM||eM.legs.forEach(l=>{let i=l.strike,t=l.direction;(0,_.wT)(l.expiration);let s=0===l.type?"call":1===l.type?"put":null,o=lq(l),a=(0,_.wT)(l.expiration),n=eZ.find(e=>e.hasOwnProperty(a)),d=n&&n[a].filter(e=>e.strike===i&&e.option_type===s).map(e=>{let l=(e.ask+e.bid)/2;return{...e,sides:o,direction:t,mid:l.toFixed(2)}}).filter(e=>e.root_symbol===(null==eM?void 0:eM.ticker));d?e.push(...d):e.push({...l,option_type:s,sides:o,direction:t,expiration_date:a}),lA(e),eC(e)})}},[eM]),(0,v.useEffect)(()=>{var e,l,i,t,s,o,a,n;let d=null==eN?void 0:eN.reduce((e,l)=>null===e||(null==l?void 0:l.strike)<(null==e?void 0:e.strike)?l:e,null),r=null==eN?void 0:eN.map((e,l)=>{let i,t=null==Math?void 0:Math.min(...lw);(!isFinite(t)||isNaN(t)||void 0===lw)&&(t=1);for(var s=0;s<lw.length;s++)"empty"===lw[s]?t=0:isNaN(parseFloat(lw[s]))||(t=Math.min(t,parseFloat(lw[s])));(null==eN?void 0:eN.length)===1?i=1:(null==eN?void 0:eN.length)>1?i=void 0===lw[l]?1/t:lw[l]/t:Number.isInteger(i)||lw[l]%t==0?(!isFinite(i)||isNaN(i))&&(i=1):i=lw[l];let o=0;return(null==d?void 0:d.sides)==="buy_to_open"||(null==d?void 0:d.sides)==="buy_to_close"?(null==e?void 0:e.sides)==="buy_to_open"||(null==e?void 0:e.sides)==="buy_to_close"?o=(null==e?void 0:e.bid)*Number(i)*(null==e?void 0:e.direction):((null==e?void 0:e.sides)==="sell_to_open"||(null==e?void 0:e.sides)==="sell_to_close")&&(o=(null==e?void 0:e.ask)*Number(i)*(null==e?void 0:e.direction)):((null==d?void 0:d.sides)==="sell_to_open"||(null==d?void 0:d.sides)==="sell_to_close")&&((null==e?void 0:e.sides)==="buy_to_open"||(null==e?void 0:e.sides)==="buy_to_close"?o=(null==e?void 0:e.ask)*Number(i)*(null==e?void 0:e.direction):((null==e?void 0:e.sides)==="sell_to_open"||(null==e?void 0:e.sides)==="sell_to_close")&&(o=(null==e?void 0:e.bid)*Number(i)*(null==e?void 0:e.direction))),o}),u=null==eN?void 0:eN.map((e,l)=>{let i,t=null==Math?void 0:Math.min(...lw);(!isFinite(t)||isNaN(t))&&(t=1),(null==eN?void 0:eN.length)===1?i=1:(null==eN?void 0:eN.length)>1?i=void 0===lw[l]?1/t:lw[l]/t:Number.isInteger(i)||lw[l]%t==0?(!isFinite(i)||isNaN(i))&&(i=1):i=lw[l];let s=0;return(null==d?void 0:d.sides)==="buy_to_open"||(null==d?void 0:d.sides)==="buy_to_close"?(null==e?void 0:e.sides)==="buy_to_open"||(null==e?void 0:e.sides)==="buy_to_close"?s=(null==e?void 0:e.ask)*Number(i)*(null==e?void 0:e.direction):((null==e?void 0:e.sides)==="sell_to_open"||(null==e?void 0:e.sides)==="sell_to_close")&&(s=(null==e?void 0:e.bid)*Number(i)*(null==e?void 0:e.direction)):((null==d?void 0:d.sides)==="sell_to_open"||(null==d?void 0:d.sides)==="sell_to_close")&&((null==e?void 0:e.sides)==="buy_to_open"||(null==e?void 0:e.sides)==="buy_to_close"?s=(null==e?void 0:e.bid)*Number(i)*(null==e?void 0:e.direction):((null==e?void 0:e.sides)==="sell_to_open"||(null==e?void 0:e.sides)==="sell_to_close")&&(s=(null==e?void 0:e.ask)*Number(i)*(null==e?void 0:e.direction))),s}),c=null==r?void 0:r.reduce((e,l)=>e+l,0),v=null==u?void 0:u.reduce((e,l)=>e+l,0),h="dashboard"===ec?Number(l1):(null===(e=er[0])||void 0===e?void 0:e.last)===0?0:null===(l=er[0])||void 0===l?void 0:l.last,g=Number(c)+h/100*ls,p=Number(v)+h/100*ls,_=(Number(c)+Number(v))/2,m=Number(_)+h/100*ls;if("roll_over"===ev&&"dashboard"===ec){let e=null==eN?void 0:eN.map(e=>parseFloat(null==e?void 0:e.old_mid)),l=null==eN?void 0:eN.map(e=>parseFloat(null==e?void 0:e.old_bid)),d=null==eN?void 0:eN.map(e=>parseFloat(null==e?void 0:e.old_ask)),r=null==eN?void 0:eN.map(e=>lI(e.old_option_type,e.sidesRollover)),u=null===(i=null==e?void 0:e.map((e,l)=>Math.abs(e)*r[l]))||void 0===i?void 0:i.reduce((e,l)=>e+l,0);null===(t=null==l?void 0:l.map((e,l)=>Math.abs(e)*r[l]))||void 0===t||t.reduce((e,l)=>e+l,0),null===(s=null==d?void 0:d.map((e,l)=>Math.abs(e)*r[l]))||void 0===s||s.reduce((e,l)=>e+l,0);let c=null==eN?void 0:eN.map(e=>lI(e.option_type,e.sides)),v=null==eN?void 0:eN.map(e=>null==e?void 0:e.mid),h=null===(o=null==c?void 0:c.map((e,l)=>e*Math.abs(v[l])))||void 0===o?void 0:o.reduce((e,l)=>e+l,0),g=ls?Number(u)+Number(h)+l1/100*ls:Number(u)+Number(h),p=null==eN?void 0:eN.map(e=>null==e?void 0:e.bid),_=null===(a=null==c?void 0:c.map((e,l)=>e*Math.abs(p[l])))||void 0===a?void 0:a.reduce((e,l)=>e+l,0),m=ls?Number(u)+Number(_)+l1/100*ls:Number(u)+Number(_),b=null==eN?void 0:eN.map(e=>null==e?void 0:e.ask),x=null===(n=null==c?void 0:c.map((e,l)=>e*Math.abs(b[l])))||void 0===n?void 0:n.reduce((e,l)=>e+l,0),y=ls?Number(u)+Number(x)+l1/100*ls:Number(u)+Number(x);m>0&&y>0?(parseFloat(m),parseFloat(y)):0>parseFloat(m)&&0>parseFloat(y)?Math.abs(m)>Math.abs(y)&&([m,y]=[y,m]):0>parseFloat(m)&&parseFloat(y)>0&&Math.abs(parseFloat(m))>parseFloat(y)&&([m,y]=[y,m]),lc(null==g?void 0:g.toFixed(2)),ln(null==m?void 0:m.toFixed(2)),lr(null==y?void 0:y.toFixed(2))}else c>0&&v>0?(parseFloat(c),parseFloat(v)):0>parseFloat(c)&&0>parseFloat(v)?Math.abs(c)>Math.abs(v)&&([c,v]=[v,c]):0>parseFloat(c)&&parseFloat(v)>0&&Math.abs(parseFloat(c))>parseFloat(v)&&([c,v]=[v,c]),ls?(lc(null==m?void 0:m.toFixed(2)),ln(null==g?void 0:g.toFixed(2)),lr(null==p?void 0:p.toFixed(2))):(lc(null==_?void 0:_.toFixed(2)),ln(null==c?void 0:c.toFixed(2)),lr(null==v?void 0:v.toFixed(2)))},[eN,lw,lF,ev,ls,ec,er,ld,la,lu]),(0,v.useEffect)(()=>{if(eM&&eM.legs&&eN){var e;let l=eM.legs.map(e=>e.strike),i=l.filter(e=>!eN.some(l=>l.strike===e));(null===(e=er[0])||void 0===e?void 0:e.last)===i[0]&&lC(i)}},[eM,eN,er]);let lQ=(e,l)=>{let i=[...ew],t=[...eN];i[l]=e,eB(i);let s=t[l].expiration_date,o=eZ.find(e=>e.hasOwnProperty(s)),a=lU(o&&o[s],{...t[l],strike:Number(e)});t[l]={...t[l],...a,strike:Number(e)},eC(t)},lR=(e,l)=>{let i=[...eF],t=[...eN];if(i[l]=e,t[l].expiration_date=e,eC(t),lA(t),eL(i),"dashboard"===ec){var s;ey((0,p.lP)({searchKey:null===(s=eN[0])||void 0===s?void 0:s.ticker,expiration:e}))}},lK=(e,l)=>{let i=[...eA];i[l]=e,eI(i)},l$=(e,l)=>{let i=[...lw];i[l]=e,lB(i)},lz=(e,l)=>{let i=[...lF];i[l]=e,lL(i)},lG=(e,l)=>{let i=[...lv],t=[...eN];i[l]=e,lh(i);let s=t[l].expiration_date,o=eZ.find(e=>e.hasOwnProperty(s)),a=lU(o[s],{...t[l],option_type:e});t[l]={...t[l],...a,option_type:e},eC(t)},lH=(e,l)=>{let i="buy_to_open"===e||"buy_to_close"===e?1:"sell_to_open"===e||"sell_to_close"===e?-1:0;eC(t=>[...t.slice(0,l),{...t[l],sides:e,direction:i},...t.slice(l+1,t.length)])},lW=e=>{let l=[...eN];if(l.splice(e,1),"dashboard"===ec){let l=[...lw];l.splice(e,1),lB(l)}eC(l)};(0,v.useEffect)(()=>{let e=e9.map(e=>e.value);lD(e)},[]);let lY={};"multileg"===lS[1]&&(0===ls||null===ls)&&(null==eN?void 0:eN.length)>1?lY={classType:"multileg",type:ly,duration:l_,account_id:eT.selectedAccountId,symbol:null===(H=eN[0])||void 0===H?void 0:H.root_symbol,price:eV,stop:eU,quantity:lw,orders:eN.map((e,l)=>({quantity:void 0===lw[l]?[1]:lw[l],option_symbol:null==e?void 0:e.symbol,side:null==e?void 0:e.sides}))}:"combo"===lS[2]&&ls>0&&(null==eN?void 0:eN.length)<=2?lY={classType:"combo",type:ly,duration:l_,account_id:eT.selectedAccountId,symbol:null===(W=eN[0])||void 0===W?void 0:W.root_symbol,price:eV,stop:eU,side:lk,quantity:ls,orders:eN.map((e,l)=>({quantity:void 0===lw[l]?[1]:lw[l],option_symbol:null==e?void 0:e.symbol,side:null==e?void 0:e.sides}))}:(0===ls||null===ls)&&(lY={classType:"option",type:lb,duration:l_,account_id:eT.selectedAccountId,symbol:null===(Y=eN[0])||void 0===Y?void 0:Y.root_symbol,price:eV,stop:eU,side:null===(X=eN[0])||void 0===X?void 0:X.sides,quantity:lw[0],option_symbol:null===(J=eN[0])||void 0===J?void 0:J.symbol});let lX=new j.Howl({src:["../assets/sound/success.mp3"],volume:1}),lJ=e=>{var l,i,t,s;let o=null==e?void 0:e.data;if((null==e?void 0:null===(l=e.response)||void 0===l?void 0:l.status)>=400||o&&(null==o?void 0:null===(i=o.errors)||void 0===i?void 0:i.error.length)>0){let l;e$(l=o&&(null==o?void 0:null===(t=o.errors)||void 0===t?void 0:t.error.length)>0?(l=null==o?void 0:null===(s=o.errors)||void 0===s?void 0:s.error.map(e=>e)).length>0?l.join(" "):"-":null==e?void 0:e.response.data),eR(!0),l0.play()}else e.error?(e$(e.error.message),eR(!0),l0.play()):(eG(!0),lX.play(),setTimeout(()=>{ex(),ej.push("/dashboard")},1e3))},l0=new j.Howl({src:["../assets/sound/error.mp3"],volume:1}),l1=null,l2="";if("dashboard"===ec){let e=null===(ee=eu[0])||void 0===ee?void 0:ee.ticker,l=eE.find(l=>l.symbol===e);l1=l?l.last:null,l2=l?l.symbol:""}(0,v.useEffect)(()=>{var e;let l=eN.map(e=>null==e?void 0:e.symbol),i=null===(e=eN[0])||void 0===e?void 0:e.root_symbol,t=[i,...l],s=eT.selectedAccountId,o=setInterval(()=>{ey((0,k.fr)(t)).then(e=>{if(e){let l=null==e?void 0:e.payload,i=null==eN?void 0:eN.map(i=>{if((null==i?void 0:i.strike)==="Strike")return i;if(Array.isArray(l)){let e=null==l?void 0:l.find(e=>(null==i?void 0:i.expiration_date)===(null==e?void 0:e.expiration_date)&&(null==i?void 0:i.option_type)===(null==e?void 0:e.option_type)&&(null==i?void 0:i.strike)===(null==e?void 0:e.strike));return e?{...i,mid:((null==e?void 0:e.bid)+(null==e?void 0:e.ask))/2,bid:null==e?void 0:e.bid,ask:null==e?void 0:e.ask}:i}if("object"==typeof(null==e?void 0:e.payload)){let l=[e.payload],t=null==l?void 0:l.find(e=>(null==i?void 0:i.expiration_date)===(null==e?void 0:e.expiration_date)&&(null==i?void 0:i.option_type)===(null==e?void 0:e.option_type)&&(null==i?void 0:i.strike)===(null==e?void 0:e.strike));return t?{...i,mid:((null==t?void 0:t.bid)+(null==t?void 0:t.ask))/2,bid:null==t?void 0:t.bid,ask:null==t?void 0:t.ask}:i}console.error("uniqueDataArray is not an array or object")});eC(i)}}),ey((0,h.$l)(s))},2e3);return()=>{clearInterval(o)}},[eN,ey]),(0,v.useEffect)(()=>{var e,l,i;let t=0,s="dashboard"===ec?l1*ls:null===(e=eH[0])||void 0===e?void 0:e.last;if("market"===ly||"even"===ly){(null==eN?void 0:eN.length)>=2&&"Add Underlying"===eJ?t=100*lu:ls?ls&&(t=100*lu):t=100*lu;let e=lu<0?"Estimated Credit:":"Estimated Debit:";e2(e)}else if((null==eN?void 0:eN.length)>1&&!ls&&"debit"===ly)t=100*eV,e2("Estimated Debit:");else if((null==eN?void 0:eN.length)>1&&!ls&&"credit"===ly)t=100*eV,e2("Estimated Credit:");else if((null==eN?void 0:eN.length)>=1&&ls&&eY&&"debit"===ly)"Remove Underlying"===eJ&&(t=s+100*eV),e2("Estimated Debit:");else if((null==eN?void 0:eN.length)>=1&&ls&&eY&&"credit"===ly)"Remove Underlying"===eJ&&(t=s-100*eV),e2("Estimated Credit:");else if("limit"===lb&&"Add Underlying"===eJ){t=100*eV*(null==lw?void 0:lw.length)==0?1:lw[0];let e=lu<0?"Estimated Credit:":"Estimated Debit:";e2(e)}else if("stop_limit"===lb&&"Add Underlying"===eJ){t=100*eV*(null==lw?void 0:lw.length)==0?1:lw[0];let e=lu<0?"Estimated Credit:":"Estimated Debit:";e2(e)}else if("stop"===lb&&"Add Underlying"===eJ){t=100*eU*(null==lw?void 0:lw.length)==0?1:lw[0];let e=lu<0?"Estimated Credit:":"Estimated Debit:";e2(e)}else if("market"===lb&&"Add Underlying"===eJ){let e=(null==lw?void 0:lw.length)===0?1:lw[0];t=100*lu*e;let l=lu<0?"Estimated Credit:":"Estimated Debit:";e2(l)}else if((null==eN?void 0:eN.length)===1&&"Add Underlying"===eJ){let e=(null==lw?void 0:lw.length)===0?1:lw[0];t=100*lu*e;let l=lu<0?"Estimated Credit:":"Estimated Debit:";e2(l)}if(lM(t=t<0?Math.abs(t):t),(null===(l=eH[0])||void 0===l?void 0:l.last)===0){let e=ls*(null===(i=er[0])||void 0===i?void 0:i.last);eW([{last:e}])}},[lu,ls,eH,lb,ly,eV,eU,lw,eJ]);let l3=(e,l)=>{var i;let t=parseFloat(e),s="dashboard"===ec?l1:null===(i=er[0])||void 0===i?void 0:i.last;return isNaN(t)||null===t?0:isNaN(s)?0:t*s},l4=e=>{let l=parseFloat(e);lo(l);let i=l3(l,eH[0]);eW([{last:i}])},l6=null==eN?void 0:eN.map(e=>{var l;return(null===(l=null==Object?void 0:Object.keys(e))||void 0===l?void 0:l.length)===0});(0,v.useEffect)(()=>{ep?(e0("Remove Underlying"),eX(!0)):(e0("Add Underlying"),eX(!1))},[ep]),(0,v.useEffect)(()=>{(null==eN?void 0:eN.length)>2&&(e0("Add Underlying"),eX(!1),lo(null))},[eN]),(0,v.useEffect)(()=>{if((null==eN?void 0:eN.length)===1&&"Add Underlying"===eJ){let e=(null==lw?void 0:lw.length)===0?1:lw[0],l=Math.abs(100*lu*e);lM(l)}if((null==eN?void 0:eN.length)===2&&"Add Underlying"===eJ){let e=Math.abs(100*lu);lM(e)}},[null==eN?void 0:eN.length,eJ,lw,lu]);let l8=(0,v.useMemo)(()=>lw.reduce((e,l)=>Math.abs(+e)+Math.abs(+l),0),[lw,eN]);(0,v.useMemo)(async()=>{if(!isNaN(l8)||l8){if("roll_over"===ev){let i=eN.map((e,l)=>({quantity:void 0===lF[l]?[1]:Number(lF[l]),option_symbol:e.old_option_symbol,side:e.sidesRollover})),t=1===i.length?{...lY,classType:"option",...i[0]}:{...lY,classType:"multileg",orders:i},s=[];if(lY.orders)s=[...lY.orders,...t.orders];else{var e,l;s=[{side:null===(e=eN[0])||void 0===e?void 0:e.sides,quantity:Math.abs(lw[0]),option_symbol:null===(l=eN[0])||void 0===l?void 0:l.symbol},...i]}let o=s.length>4?[lY,t]:[{...lY,classType:1==s.filter(e=>e.side).length?"option":"multileg",quantity:[...lF,...lw].length,orders:s.filter(e=>e.side)}],a=null==o?void 0:o.map(async e=>{let l=await ey((0,m.yK)({...e,preview:!0}));return l});Promise.all(a).then(e=>{let l={cost:0,order_cost:0,commission:0},i="";e.forEach(e=>{var t,s,o,a,n,d,r,u;if(null==e?void 0:null===(t=e.payload)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:null===(o=s.errors)||void 0===o?void 0:o.error)i+=((null==e?void 0:null===(a=e.payload)||void 0===a?void 0:null===(n=a.data)||void 0===n?void 0:null===(d=n.errors)||void 0===d?void 0:d.error)||"")+" ";else{let{cost:i=0,order_cost:t=0,commission:s=0}=(null==e?void 0:null===(r=e.payload)||void 0===r?void 0:null===(u=r.data)||void 0===u?void 0:u.order)||{};l={cost:l.cost+i,order_cost:l.order_cost+t,commission:l.commission+s}}}),i?(e4(i),e8(null)):(null==e8||e8(l),e4(""))}).catch(e=>{})}else ey((0,m.yK)({...lY,preview:!0})).then(e=>{var l,i,t,s;if(null==e?void 0:null===(l=e.payload)||void 0===l?void 0:null===(i=l.data)||void 0===i?void 0:i.order){let l=null==e?void 0:null===(t=e.payload)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.order;l&&(e4(null),e8(l))}else e.payload.data.errors.error&&e4(e.payload.data.errors.error)}).catch(e=>{})}},[l8,eN]);let l9=null==eN?void 0:eN.map((e,l)=>{var i;let t=(null==e?void 0:e.option_type)==="call"?0:1;null==e||e.option_type;let s="buy_to_open"===e.sides||"buy_to_close"===e.sides?1:"sell_to_open"===e.sides||"sell_to_close"===e.sides?-1:0,o=null==e?void 0:e.strike,a=null==e?void 0:e.expiration_date,n=new Date(a);n.setHours(16,0,0,0);let d=100*Number(null==e?void 0:null===(i=e.greeks)||void 0===i?void 0:i.mid_iv),r=(null==e?void 0:e.ask)||0,u=(null==e?void 0:e.bid)||0,c=Number(r+u)/2;null==e||e.option_type;let v=null==e?void 0:e.symbol;return{y:l,strike:o,size:1,purchasePrice:c,direction:s,type:t,expiration:n,symbol:v,volatility:d,range:1,indexOfStrikePrice:1,index:l}}),l7=null===(l=null==l9?void 0:l9.map(e=>{var l,i;let t=null==eM?void 0:null===(l=eM.legs)||void 0===l?void 0:l.some(e=>2===e.type),s=null==eM?void 0:null===(i=eM.legs)||void 0===i?void 0:i.find(e=>2===e.type);return t&&2===s.type&&ep?[{...e},{...s}]:{...e}}))||void 0===l?void 0:l.flat(),l5=null===(i=er[0])||void 0===i?void 0:i.last;for(let e=0;e<(null==l9?void 0:l9.length);e++){let l=null===(el=l9[e])||void 0===el?void 0:el.legTypeVal,i=null===(ei=l9[e])||void 0===ei?void 0:ei.optionTypeVal,t=null===(et=l9[e])||void 0===et?void 0:et.direction,s=null===(es=l9[e])||void 0===es?void 0:es.strike,o=null===(eo=l9[e])||void 0===eo?void 0:eo.expirationDateUTC,a=null===(ea=l9[e])||void 0===ea?void 0:ea.volatility,n=null===(en=l9[e])||void 0===en?void 0:en.purchasePrice,d=l9[e].symbol;ed=(0,C.Z)(l5,l,i,t,"custom",s,o,a,n,d,l7)}let ie=new S.Z(ed),il=null==ie?void 0:ie.getMinMaxProfit(),ii=ie.calculateNetValue(),it=null==il?void 0:il.min;return(0,v.useEffect)(()=>{"debit"===ly?lE((0,N._T)(lT)):"credit"===ly?lE((0,N._T)(Math.abs(lT))):"Add Underlying"===eJ?lE((0,N._T)(Math.abs(lT))):"Remove Underlying"===eJ&&lE((0,N._T)(Math.abs(lT)))},[ly,lT,it,eV,ii,eJ]),(0,t.jsx)(s.Z.Body,{children:(0,t.jsxs)("form",{children:[(0,t.jsx)("div",{className:"stockDetails",children:(0,t.jsxs)("ul",{className:"w-100",children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("label",{children:"Total Value"}),(0,t.jsx)("strong",{children:(0,N._T)(null==eT?void 0:null===(u=eT.balances)||void 0===u?void 0:u.total_equity)||0})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("label",{children:(null==eT?void 0:null===(D=eT.balances)||void 0===D?void 0:D.account_type)==="cash"?"Funds available":"Option B.P"}),(0,t.jsx)("strong",{children:(0,N._T)(((null==eT?void 0:null===(T=eT.balances)||void 0===T?void 0:T.account_type)==="cash"?null==eT?void 0:null===(M=eT.balances)||void 0===M?void 0:null===(Z=M.cash)||void 0===Z?void 0:Z.cash_available:null==eT?void 0:null===(E=eT.balances)||void 0===E?void 0:null===(w=E[null==eT?void 0:null===(P=eT.balances)||void 0===P?void 0:P.account_type])||void 0===w?void 0:w.option_buying_power)||0)})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("label",{children:(null==eT?void 0:null===(B=eT.balances)||void 0===B?void 0:B.account_type)==="cash"?"Settled funds":"Stock B.P"}),(0,t.jsx)("strong",{children:(0,N._T)(((null==eT?void 0:null===(F=eT.balances)||void 0===F?void 0:F.account_type)==="cash"?(null==eT?void 0:null===(L=eT.balances)||void 0===L?void 0:null===(A=L.cash)||void 0===A?void 0:A.cash_available)-(null==eT?void 0:null===(I=eT.balances)||void 0===I?void 0:null===(V=I.cash)||void 0===V?void 0:V.unsettled_funds):null==eT?void 0:null===(O=eT.balances)||void 0===O?void 0:null===(q=O[null==eT?void 0:null===(U=eT.balances)||void 0===U?void 0:U.account_type])||void 0===q?void 0:q.stock_buying_power)||0)})]}),(0,t.jsxs)("li",{className:"ms-auto",children:[(0,t.jsx)("label",{children:"Account"}),(0,t.jsx)("strong",{children:eT.selectedAccountId})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("label",{children:"Stock Price:"}),"dashboard"===ec?(0,t.jsx)("strong",{children:l1?(0,N._T)(l1):"-"}):(0,t.jsx)("strong",{children:(null===(Q=er[0])||void 0===Q?void 0:Q.last)===0?0:(0,N._T)(null===(R=er[0])||void 0===R?void 0:R.last)||"-"})]})]})}),(0,t.jsxs)("div",{className:c().legInfo,children:[(0,t.jsxs)("div",{className:"d-flex justify-content-between  mb-4 align-items-center",children:[(0,t.jsx)("h3",{children:"Legs "}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Z,{variant:"outline-primary",onClick:()=>{"Remove Underlying"===eJ&&(lo(null),lx("market")),eX(!eY),e0(eY?"Add Underlying":"Remove Underlying")},disabled:(null==eN?void 0:eN.length)>2,children:eJ}),"dashboard"!==ec&&(0,t.jsx)(o.Z,{variant:"outline-primary",disabled:eN.length>=4,onClick:()=>eC([...eN,{}]),children:"+ Add Leg"})]})]}),"roll_over"===ev?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{style:{margin:"1rem 1.5rem",fontWeight:"bold"},children:"Existing Legs"}),(0,t.jsxs)("ul",{className:c().legListing,children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{className:c().expiration,children:"Expiration"}),(0,t.jsx)("strong",{className:c().strike,children:"Strike"}),(0,t.jsx)("strong",{className:c().type,children:"Type"}),(0,t.jsx)("strong",{className:c().side,children:"Side"}),(0,t.jsx)("strong",{className:c().quantity,children:"Quantity"}),(0,t.jsx)("strong",{className:c().trade,children:"Trade type"})]}),null==eN?void 0:eN.map((e,l)=>{var i;return(0,t.jsxs)("li",{children:[(0,t.jsx)("div",{className:c().expiration,children:(0,t.jsx)(a.Z.Select,{disabled:!0,"aria-label":"Default select example",children:null==eP?void 0:null===(i=eP.date)||void 0===i?void 0:i.map(l=>(0,t.jsx)("option",{value:l.value,selected:(null==e?void 0:e.old_expiration_date)===l,children:(0,_.Bi)(l)},l.value))})}),(0,t.jsx)("div",{className:c().strike,children:(0,t.jsx)(a.Z.Select,{disabled:!0,"aria-label":"Default select example",children:(0,t.jsx)("option",{value:e.old_strike,children:e.old_strike})})}),(0,t.jsx)("div",{className:c().type,children:(0,t.jsx)(a.Z.Select,{disabled:!0,"aria-label":"Default select example",children:"call"===e.old_option_type?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("option",{value:"call",children:"Call"}),(0,t.jsx)("option",{value:"put",children:"Put"})]}):"put"===e.old_option_type?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("option",{value:"put",children:"Put"}),(0,t.jsx)("option",{value:"call",children:"Call"})]}):null})}),(0,t.jsx)("div",{className:c().side,children:(0,t.jsx)(a.Z.Select,{disabled:!0,"aria-label":"Default select example ",children:li.map(l=>(0,t.jsx)("option",{value:l.value,selected:e.sidesRollover===l.value,children:l.label},l.value))})}),(0,t.jsx)("div",{className:c().quantity,children:(0,t.jsx)(a.Z.Control,{type:"number",placeholder:"1",min:"1",value:Math.abs(lF[l]),onChange:e=>lz(e.target.value,l)})}),(0,t.jsx)("div",{className:c().trade,children:(0,t.jsxs)(a.Z.Select,{"aria-label":"Default select example","aria-readonly":!0,children:[(0,t.jsx)("option",{value:e.mid,children:"Mid ".concat(Math.abs(e.old_mid))}),(0,t.jsx)("option",{value:e.bid,children:"Bid ".concat(e.bid)}),(0,t.jsx)("option",{value:e.ask,children:"Ask ".concat(e.ask)})]})})]},l)})]}),(0,t.jsx)("h3",{style:{margin:"1rem 1.5rem",fontWeight:"bold"},children:"Rollover To"})]}):"",(0,t.jsxs)("ul",{className:c().legListing,children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{className:c().expiration,children:"Expiration"}),(0,t.jsx)("strong",{className:c().strike,children:"Strike"}),(0,t.jsx)("strong",{className:c().type,children:"Type"}),(0,t.jsx)("strong",{className:c().side,children:"Side"}),(0,t.jsx)("strong",{className:c().quantity,children:"Quantity"}),(0,t.jsx)("strong",{className:c().trade,children:"Trade type"})]}),eN.map((e,l)=>{var i,s;return(0,t.jsxs)("li",{children:[(0,t.jsx)("div",{className:c().expiration,children:(0,t.jsxs)(a.Z.Select,{"aria-label":"Default select example",onChange:e=>lR(e.target.value,l),children:[(0,t.jsx)("option",{value:"",children:"Expiration"}),null==eP?void 0:null===(i=eP.date)||void 0===i?void 0:i.map(l=>(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("option",{value:l,selected:(null==e?void 0:e.expiration_date)===l,children:(0,_.Bi)(l)},l)}))]})}),(0,t.jsx)("div",{className:c().strike,children:(0,t.jsxs)(a.Z.Select,{"aria-label":"Default select example",onChange:e=>lQ(e.target.value,l),value:null==e?void 0:e.strike,children:[(0,t.jsx)("option",{value:"Strike",selected:!(null==e?void 0:e.strike),children:"Strike"}),eS[null==e?void 0:e.expiration_date]&&(null===(s=eS[null==e?void 0:e.expiration_date])||void 0===s?void 0:s.map(e=>(0,t.jsx)("option",{value:e,children:e},e)))]})}),(0,t.jsx)("div",{className:c().type,children:(0,t.jsxs)(a.Z.Select,{"aria-label":"Default select example",onChange:e=>lG(e.target.value,l),value:null==e?void 0:e.option_type,children:[(0,t.jsx)("option",{value:"",children:"Type"}),ll.map(l=>(0,t.jsx)("option",{value:l.value,selected:(null==e?void 0:e.option_type)===l.value,children:l.label},l.value))]})}),(0,t.jsx)("div",{className:c().side,children:(0,t.jsxs)(a.Z.Select,{"aria-label":"Default select example",onChange:e=>lH(e.target.value,l),children:[(0,t.jsx)("option",{value:"",children:"Side"}),li.map(l=>(0,t.jsx)("option",{value:l.value,selected:(null==e?void 0:e.sides)===l.value,children:l.label},l.value))]})}),(0,t.jsx)("div",{className:c().quantity,children:(0,t.jsx)(a.Z.Control,{type:"number",placeholder:"1",min:"1",value:lw[l],onChange:e=>l$(e.target.value,l)})}),(0,t.jsx)("div",{className:c().trade,children:(0,t.jsxs)(a.Z.Select,{"aria-label":"Default select example",onChange:e=>lK(e.target.value,l),children:[(0,t.jsx)("option",{value:"number"==typeof(null==e?void 0:e.mid)?null==e?void 0:e.mid.toFixed(2):"string"==typeof(null==e?void 0:e.mid)?parseFloat(null==e?void 0:e.mid).toFixed(2):"",children:"Mid ".concat("number"==typeof(null==e?void 0:e.mid)?null==e?void 0:e.mid.toFixed(2):"string"==typeof(null==e?void 0:e.mid)?parseFloat(null==e?void 0:e.mid).toFixed(2):"0.00")}),(0,t.jsx)("option",{value:null==e?void 0:e.bid,children:"Bid ".concat((null==e?void 0:e.bid)?null==e?void 0:e.bid:0)}),(0,t.jsx)("option",{value:null==e?void 0:e.ask,children:"Ask ".concat((null==e?void 0:e.ask)?null==e?void 0:e.ask:0)})]})}),(0,t.jsx)("span",{className:"icon-delete",style:{cursor:"pointer"},onClick:()=>lW(l)})]},l)})]}),(0,t.jsxs)("div",{className:c().Infodetails,children:[eN.length>1?(0,t.jsx)(a.Z.Select,{"aria-label":"Default select example",value:ly,onChange:e=>lj(e.target.value),children:e5.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}):1===eN.length&&ls?(0,t.jsx)(a.Z.Select,{"aria-label":"Default select example",value:ly,onChange:e=>lj(e.target.value),children:e5.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}):(0,t.jsx)(a.Z.Select,{"aria-label":"Default select example",value:lb,onChange:e=>lx(e.target.value),children:e7.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),1===eN.length&&!ls&&"limit"===lb&&(0,t.jsx)(a.Z.Control,{type:"number",placeholder:"Price",className:c().formControl,onChange:e=>eO(e.target.value)}),1===eN.length&&!ls&&"market"!==lb&&"stop"===lb&&(0,t.jsx)(a.Z.Control,{type:"number",placeholder:"Stop",className:c().formControl,onChange:e=>eq(e.target.value)}),1===eN.length&&!ls&&"market"!==lb&&"stop_limit"===lb&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Z.Control,{type:"number",placeholder:"Stop",className:c().formControl,onChange:e=>eq(e.target.value)}),(0,t.jsx)(a.Z.Control,{type:"number",placeholder:"Limit",className:c().formControl,onChange:e=>eO(e.target.value)})]}),eN.length>=1&&("debit"===ly||"credit"===ly)?(0,t.jsx)(a.Z.Control,{type:"number",placeholder:"Price",className:c().formControl,onChange:e=>eO(e.target.value)}):null,(0,t.jsx)(a.Z.Select,{"aria-label":"Default select example",onChange:e=>{lm(e.target.value)},children:null==le?void 0:le.map(e=>(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("option",{value:e.value,children:e.label})}))})]}),eY&&(null==eN?void 0:eN.length)<=2?(0,t.jsxs)("div",{className:c().buySell,children:[(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{children:"Underlying"}),(0,t.jsx)(a.Z.Select,{"aria-label":"Default select example",children:(0,t.jsx)("option",{children:"".concat("dashboard"===ec?l2:(null===(K=er[0])||void 0===K?void 0:K.symbol)||"-"," ").concat("dashboard"===ec?(0,N._T)(l1):(0,N._T)(null===($=er[0])||void 0===$?void 0:$.last))})}),"close"!==ev?(0,t.jsx)(a.Z.Select,{"aria-label":"Default select example",onChange:e=>lf(e.target.value),children:lt.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}):(0,t.jsx)(a.Z.Select,{"aria-label":"Default select example",onChange:e=>lf(e.target.value),children:(0,t.jsx)("option",{value:"sell",children:"Sell"},"sell")}),(0,t.jsx)(a.Z.Control,{type:"number",placeholder:"0",value:ls,onChange:e=>{l4(e.target.value)}})]}),(0,t.jsxs)("div",{className:c().stockPrice,children:[(0,t.jsx)("label",{children:"Total Stock Price:"}),"dashboard"===ec?(0,t.jsx)("strong",{children:l1?(0,N._T)(l1*ls):"-"}):(0,t.jsx)("strong",{children:0===ls||null===ls||isNaN(ls)?"--":0===(0,N._T)(null===(z=eH[0])||void 0===z?void 0:z.last)?0:(0,N._T)(null===(G=eH[0])||void 0===G?void 0:G.last)||"-"})]})]}):"",(0,t.jsxs)("div",{className:c().legDetails,children:[(0,t.jsx)("h3",{children:"Details"}),"roll_over"===ev&&(null==eN?void 0:eN.map((e,l)=>(0,t.jsx)(n.Z,{variant:(null==e?void 0:e.direction)===-1?"danger":"success",className:c().sucessmsg,onClose:()=>ef(!1),children:(0,t.jsxs)("div",{className:"d-flex justify-content-between alertInfo",children:[(0,t.jsx)("ul",{className:"left-content",children:(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:(0,_.Bi)(null==e?void 0:e.old_expiration_date)}),(0,t.jsxs)("strong",{children:["$",null==e?void 0:e.old_strike]}),(0,t.jsx)("strong",{children:(0,_.fm)(null==e?void 0:e.old_option_type)}),(0,t.jsx)("strong",{children:(null==e?void 0:e.sidesRollover)==="buy_to_open"?"(Buy To Open)":(null==e?void 0:e.sidesRollover)==="buy_to_close"?"(Buy To Close)":(null==e?void 0:e.sidesRollover)==="sell_to_open"?"(Sell To Open)":(null==e?void 0:e.sidesRollover)==="sell_to_close"?"(Sell To Close)":""})]})}),(0,t.jsxs)("div",{className:"right-price",children:[(0,t.jsx)("strong",{children:(null==e?void 0:e.old_mid)!==void 0?(0,N._T)(parseFloat(null==e?void 0:e.old_mid))||(0,N._T)(null==e?void 0:e.old_mid):"0.00"}),(0,t.jsxs)("span",{children:["(",(0,N._T)(null==e?void 0:e.change),")"]})]})]})},l))),eN.map((e,l)=>(0,t.jsx)(n.Z,{variant:(null==e?void 0:e.direction)===-1?"danger":"success",className:c().sucessmsg,onClose:()=>ef(!1),children:(0,t.jsxs)("div",{className:"d-flex justify-content-between alertInfo",children:[(0,t.jsx)("ul",{className:"left-content",children:(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:(0,_.Bi)(null==e?void 0:e.expiration_date)}),(0,t.jsxs)("strong",{children:["$",null==e?void 0:e.strike]}),(0,t.jsx)("strong",{children:(0,_.fm)(null==e?void 0:e.option_type)}),(0,t.jsx)("strong",{children:(null==e?void 0:e.sides)==="buy_to_open"?"(Buy To Open)":(null==e?void 0:e.sides)==="buy_to_close"?"(Buy To Close)":(null==e?void 0:e.sides)==="sell_to_open"?"(Sell To Open)":(null==e?void 0:e.sides)==="sell_to_close"?"(Sell To Close)":""})]})}),(0,t.jsxs)("div",{className:"right-price ms-auto",children:[(0,t.jsx)("strong",{children:(null==e?void 0:e.mid)!==void 0?(0,N._T)(parseFloat(null==e?void 0:e.mid))||(0,N._T)(null==e?void 0:e.mid):"0.00"}),(0,t.jsxs)("span",{children:["(",(0,N._T)(null==e?void 0:e.change),")"]})]})]})},l))]})]}),(0,t.jsxs)("div",{className:c().orderNetQuote,children:[(0,t.jsxs)("div",{className:c().qoute,children:[(0,t.jsx)("h3",{className:c().netQuote,children:"Net Quote"}),(0,t.jsx)("div",{className:"stockDetails buyStrategies",children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("label",{children:["close"].includes(ev)?la<=0?"Debit Bid":"Credit Bid":la>=0?"Debit Bid":"Credit Bid"}),(0,t.jsx)("strong",{children:(0,N._T)(Math.abs(la))})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("label",{children:["close"].includes(ev)?lu<=0?"Debit Mid":"Credit Mid":lu>=0?"Debit Mid":"Credit Mid"}),(0,t.jsx)("strong",{children:(0,N._T)(Math.abs(lu))})]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("label",{children:["close"].includes(ev)?ld<=0?"Debit Ask":"Credit Ask":ld>=0?"Debit Ask":"Credit Ask"}),(0,t.jsx)("strong",{children:(0,N._T)(Math.abs(ld))})]})]})})]}),(0,t.jsxs)("div",{className:c().orderdetails,children:[(0,t.jsx)("h3",{className:c().netQuote,children:"Order Details"}),(0,t.jsx)("div",{className:"stockDetails buyStrategies",children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("label",{children:"Commission Fee"}),(null==e6?void 0:e6.commission)?(0,t.jsx)("strong",{children:(0,N._T)(null==e6?void 0:e6.commission)}):"-"]}),!!(null==e6?void 0:e6.cost)&&(0,t.jsxs)("li",{children:[(0,t.jsxs)("label",{children:["Buying Power ",(null==e6?void 0:e6.order_cost)<0?" Increase ":" Decrease "," by"]}),(0,t.jsx)("strong",{children:(0,N._T)(Math.abs(null==e6?void 0:e6.order_cost))||"-"})]})]})})]})]}),(0,t.jsxs)("div",{className:c().totalPrice,children:[(0,t.jsxs)("label",{children:["Estimated ",(null==e6?void 0:e6.cost)>0?"Debit":"Credit"]}),(0,t.jsxs)("strong",{children:[(0,N._T)(Math.abs((null==e6?void 0:e6.cost)||0))," "]})]}),(0,t.jsxs)("div",{className:c().action,children:[e3&&(0,t.jsx)("div",{style:{background:"#e3242b",padding:"10px 10px",color:"#ffffff",borderRadius:"10px"},children:e3}),(0,t.jsxs)("div",{className:"d-grid gap-2",children:[(0,t.jsxs)(o.Z,{variant:"outline-primary",className:c().Preview,onClick:()=>{let e=localStorage.getItem("accessToken");if(console.log(e,"login Token"),e){if(eg){lY.id=eg,ey((0,m.hy)(lY)).then(e=>{lJ(e)});return}if("roll_over"===ev){let e;let t=eN.map((e,l)=>({quantity:void 0===lF[l]?[1]:Number(lF[l]),option_symbol:e.old_option_symbol,side:e.sidesRollover})),s=1===t.length?{...lY,classType:"option",...t[0]}:{...lY,classType:"multileg",orders:t};if(lY.orders)e=[...lY.orders,...s.orders];else{var l,i;e=[{side:null===(l=eN[0])||void 0===l?void 0:l.sides,quantity:Math.abs(lw[0]),option_symbol:null===(i=eN[0])||void 0===i?void 0:i.symbol},...t]}e.length>4?ey((0,m.yK)(lY)).then(e=>{lJ(e),ey((0,m.yK)(s)).unwrap().then(e=>{lJ(e)})}):(lY={...lY,classType:"multileg",quantity:[...lF,...lw].length,orders:e},ey((0,m.yK)(lY)).unwrap().then(e=>{lJ(e)}))}else ey((0,m.yK)(lY)).unwrap().then(e=>{lJ(e)})}else ex(),ej.push("/login")},disabled:e3||l6.some(e=>e)||!ew||("limit"===lb||"debit"===ly||"credit"===ly)&&!eV||"stop"===lb&&!eU||"stop_limit"===lb&&(!eV||!eU)||eN.some(e=>(null==e?void 0:e.strike)==="Strike")||eN.some(e=>(null==e?void 0:e.option_type)==="Type")||eN.some(e=>(null==e?void 0:e.sides)==="Side")||eN.some(e=>!(null==e?void 0:e.option_type))||eN.some(e=>!(null==e?void 0:e.sides))||eN.some(e=>(null==e?void 0:e.option_type)===null&&(null==e?void 0:e.sides)===null&&(null==e?void 0:e.strike)===null&&(null==e?void 0:e.expiration_date)===null&&Object.values(e).some(e=>null===e)),children:[(0,t.jsx)("span",{className:"icon-buy"})," Submit"]}),(0,t.jsx)(d.Z,{position:"top-end",className:"p-4",style:{position:"fixed",top:"20px",right:"20px",zIndex:"9999"},children:(0,t.jsxs)(r.Z,{bg:"danger",show:eQ,onClose:()=>eR(!1),delay:100,children:[(0,t.jsx)(r.Z.Header,{}),(0,t.jsx)(r.Z.Body,{children:(0,t.jsxs)("div",{className:"info",children:[(0,t.jsx)("div",{className:"icon",children:(0,t.jsx)("span",{className:"icon-close"})}),(0,t.jsxs)("div",{className:"infoDetails",children:[(0,t.jsx)("strong",{children:"Error"}),(0,t.jsx)("p",{children:eK.length?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("span",{children:eK})}):"BackOffice Rejected the Order"})]})]})})]})}),ez&&(0,t.jsx)(d.Z,{position:"top-end",className:"p-3",children:(0,t.jsxs)(r.Z,{bg:"success",show:ez,onClose:()=>eG(!1),delay:2e3,children:[(0,t.jsx)(r.Z.Header,{}),(0,t.jsx)(r.Z.Body,{children:(0,t.jsxs)("div",{className:"info",children:[(0,t.jsx)("div",{className:"icon",children:(0,t.jsx)("span",{className:"icon-done"})}),(0,t.jsxs)("div",{className:"infoDetails",children:[(0,t.jsx)("strong",{children:"Success"}),(0,t.jsx)("p",{children:(0,t.jsx)("span",{children:"Order placed successfully"})})]})]})})]})})]})]})]})})}},34459:function(e,l,i){"use strict";var t,s,o=i(9268),a=i(76394),n=i.n(a),d=i(17004),r=i(78179),u=i(13777),c=i(33253),v=i(99362),h=i(24441),g=i(59683),p=i.n(g),_=i(34954),m=i(8203),b=i(57321),x=i(77672),y=i(86006),j=i(56008),k=i(83442),f=i(32574),N=i(51577),C=i(72326);(t=s||(s={})).buy="buy",t.sell="sell",t.edit="edit",l.Z=e=>{var l,i,t,a,g,S,D,T,M,Z,E,P,w,B,F,L,A,I,V,O,U,q,Q,R,K,$,z,G,H,W,Y,X,J,ee,el,ei,et,es,eo,ea,en,ed,er,eu,ec,ev,eh,eg,ep,e_,em,eb,ex,ey,ej,ek,ef,eN,eC,eS,eD,eT,eM,eZ,eE,eP,ew,eB,eF,eL,eA,eI,eV,eO,eU,eq,eQ,eR,eK,e$,ez,eG,eH,eW,eY,eX,eJ,e0;let{tradeDataMap:e1,selectedStockOrder:e2,handleClose:e3,handleSubmit:e4}=e,[e6,e8]=(0,y.useState)(e2),e9=(0,b.T)(),e7=(0,j.useRouter)(),e5=(0,j.usePathname)(),le=(0,b.C)(x.T1),ll=(0,b.C)(k.Nt);null==ll||null===(l=ll.profile)||void 0===l||l.account;let li=(0,b.C)(f.iS);(0,b.C)(f.gQ);let lt=[{value:"buy",label:"Buy"},{value:"buy_to_cover",label:"Buy To Cover"}],ls=[{value:"sell",label:"Sell"},{value:"sell_short",label:"Sell Short"}],lo=[{value:"market",label:"Market"},{value:"limit",label:"Limit"},{value:"stop",label:"Stop"},{value:"stop_limit",label:"Stop Limit"}],la=[{value:"day",label:"Day"},{value:"gtc",label:"GTC"},{value:"pre",label:"Pre"},{value:"post",label:"Post"}],[ln,ld]=(0,y.useState)((null==e1?void 0:null===(i=e1[0])||void 0===i?void 0:i.type)||(null==lo?void 0:null===(t=lo[0])||void 0===t?void 0:t.value)||"market"),[lr,lu]=(0,y.useState)(("edit"===e6||(null==e1?void 0:null===(a=e1[0])||void 0===a?void 0:a.isDashboard))&&null!==(eH=null==e1?void 0:null===(g=e1[0])||void 0===g?void 0:g.duration)&&void 0!==eH?eH:la[0].value),[lc,lv]=(0,y.useState)(("edit"===e6||(null==e1?void 0:null===(S=e1[0])||void 0===S?void 0:S.isDashboard))&&null!==(eW=null==e1?void 0:null===(D=e1[0])||void 0===D?void 0:D.side)&&void 0!==eW?eW:lt[0].value),[lh,lg]=(0,y.useState)(("edit"===e6||(null==e1?void 0:null===(T=e1[0])||void 0===T?void 0:T.isDashboard))&&null!==(eY=null==e1?void 0:null===(M=e1[0])||void 0===M?void 0:M.side)&&void 0!==eY?eY:ls[0].value),[lp,l_]=(0,y.useState)(("edit"===e6||(null==e1?void 0:null===(Z=e1[0])||void 0===Z?void 0:Z.isDashboard))&&null!==(eX=null==e1?void 0:null===(E=e1[0])||void 0===E?void 0:E.quantity)&&void 0!==eX?eX:1),[lm,lb]=(0,y.useState)(("edit"===e6||(null==e1?void 0:null===(P=e1[0])||void 0===P?void 0:P.isDashboard))&&null!==(eJ=null==e1?void 0:null===(w=e1[0])||void 0===w?void 0:w.price)&&void 0!==eJ?eJ:""),[lx,ly]=(0,y.useState)(("edit"===e6||(null==e1?void 0:null===(B=e1[0])||void 0===B?void 0:B.isDashboard))&&null!==(e0=null==e1?void 0:null===(F=e1[0])||void 0===F?void 0:F.stop)&&void 0!==e0?e0:""),lj=e=>{ld(e.target.value)},lk=e=>{lu(e.target.value)},lf=(null===(L=e1[0])||void 0===L?void 0:L.symbol)?null===(A=e1[0])||void 0===A?void 0:A.symbol:"-",lN={type:ln,side:"buy"===e6?lc:lh,duration:lr,account_id:li.selectedAccountId,symbol:lf,quantity:lp,classType:"equity",price:lm,stop:lx},lC=()=>{let e=localStorage.getItem("accessToken");e?(e9((0,x.yK)(lN)),"/dashboard/"===e5?e3():e7.push("/dashboard")):(e3(),e7.push("/login"))},lS=("limit"===ln?lm:null===(I=e1[0])||void 0===I?void 0:I.last)*lp;return(0,o.jsx)(d.Z.Body,{className:"BuySellStock",children:(0,o.jsxs)("form",{children:[(0,o.jsxs)("ul",{className:p().labelValue,children:[(0,o.jsxs)("li",{children:[(0,o.jsx)("label",{children:"Account"}),(0,o.jsx)("strong",{"aria-label":"Default select example",children:li.selectedAccountId})]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("label",{children:"Balance"}),(0,o.jsxs)("strong",{children:[" ",(0,C._T)(null==li?void 0:null===(V=li.balances)||void 0===V?void 0:V.total_equity)||0]})]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("label",{children:(null==li?void 0:null===(O=li.balances)||void 0===O?void 0:O.account_type)==="cash"?"Settled funds":"Stock BP"}),(0,o.jsx)("strong",{children:(0,C._T)((null==li?void 0:null===(U=li.balances)||void 0===U?void 0:U.account_type)==="cash"?(null==li?void 0:null===(q=li.balances)||void 0===q?void 0:null===(Q=q.cash)||void 0===Q?void 0:Q.cash_available)-(null==li?void 0:null===(R=li.balances)||void 0===R?void 0:null===(K=R.cash)||void 0===K?void 0:K.unsettled_funds):null==li?void 0:null===($=li.balances)||void 0===$?void 0:null===(G=$[null==li?void 0:null===(z=li.balances)||void 0===z?void 0:z.account_type])||void 0===G?void 0:G.stock_buying_power)||0})]})]}),"edit"===e6?(0,o.jsx)(r.Z,{activeKey:e6,id:"uncontrolled-tab-example",className:"",children:(0,o.jsx)(u.Z,{eventKey:s.edit,title:"Edit",children:(0,o.jsxs)("div",{className:p().buyStrategies,children:[(0,o.jsxs)("div",{className:p().stockDetails,children:[(0,o.jsxs)("div",{className:p().info,children:[(0,o.jsx)("h3",{children:(null===(H=e1[0])||void 0===H?void 0:H.symbol)?null===(W=e1[0])||void 0===W?void 0:W.symbol:"AAPL"}),(0,o.jsxs)("span",{children:["NASDAQ:",(null===(Y=e1[0])||void 0===Y?void 0:Y.symbol)?null===(X=e1[0])||void 0===X?void 0:X.symbol:"NASDAQ"]})]}),(0,o.jsxs)("div",{className:p().priceMain,children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:p().currency,children:"$"}),(0,o.jsx)("span",{className:p().price,children:(null===(J=e1[0])||void 0===J?void 0:J.last)===0?0:(0,N._)(null===(ee=e1[0])||void 0===ee?void 0:ee.last)||"-"})]}),(0,o.jsxs)("span",{className:p().change,children:["$"," ",(null===(el=e1[0])||void 0===el?void 0:el.change)===0?0:(null===(ei=e1[0])||void 0===ei?void 0:ei.change)>0?"+"+(0,N.r)(null===(et=e1[0])||void 0===et?void 0:et.change):(null===(es=e1[0])||void 0===es?void 0:es.change)<0&&"-"+(0,N.r)(null===(eo=e1[0])||void 0===eo?void 0:eo.change)||"-"," ","(",(null===(ea=e1[0])||void 0===ea?void 0:ea.change_percentage)===0?0:(null===(en=e1[0])||void 0===en?void 0:en.change_percentage)!==null&&(0,N.r)(null===(ed=e1[0])||void 0===ed?void 0:ed.change_percentage)+"%"||"-",")",(null===(er=e1[0])||void 0===er?void 0:er.change_percentage)===0||(null===(eu=e1[0])||void 0===eu?void 0:eu.change_percentage)>0?(0,o.jsx)(n(),{src:_.Z,alt:"Up",width:14,height:14}):(0,o.jsx)(n(),{src:m.Z,alt:"Down",width:14,height:14})]})]})]}),(0,o.jsx)("div",{className:p().buySellDetails,children:(0,o.jsxs)("ul",{className:"w-100",children:[(0,o.jsxs)("li",{children:[(0,o.jsx)("strong",{children:"ASK "}),(0,o.jsxs)("label",{children:["@",(0,N.r)(null===(ec=e1[0])||void 0===ec?void 0:ec.ask)]})]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("strong",{children:"BID "}),(0,o.jsxs)("label",{children:["@",(0,N.r)(null===(ev=e1[0])||void 0===ev?void 0:ev.bid)]})]})]})}),(0,o.jsx)(h.Z.Select,{"aria-label":"Default select example",value:lc,onChange:e=>lv(e.target.value),children:lt.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,o.jsx)(h.Z.Select,{"aria-label":"Default select example",value:ln,onChange:lj,children:lo.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),"limit"===ln?(0,o.jsx)(h.Z.Control,{type:"number",placeholder:"Price",className:p().formControl,onChange:e=>lb(e.target.value)}):null,"stop"===ln?(0,o.jsx)(h.Z.Control,{type:"number",placeholder:"Stop",className:p().formControl,onChange:e=>ly(e.target.value)}):null,"stop_limit"===ln?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.Z.Control,{type:"number",placeholder:"Stop",className:p().formControl,onChange:e=>ly(e.target.value)}),(0,o.jsx)(h.Z.Control,{type:"number",placeholder:"Limit",className:p().formControl,onChange:e=>lb(e.target.value)})]}):null,(0,o.jsx)(h.Z.Select,{"aria-label":"Default select example",value:lr,onChange:lk,children:la.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,o.jsxs)(h.Z.Group,{className:"mb-5",controlId:"exampleForm.ControlInput1",children:[(0,o.jsx)(h.Z.Label,{children:"Quantity"}),(0,o.jsx)(h.Z.Control,{type:"number",placeholder:"1","aria-describedby":"cost",value:lp,onChange:e=>l_(e.target.value)}),(0,o.jsxs)(h.Z.Text,{id:"cost",className:p().estimatedCost,children:["Estimated cost: ",(0,o.jsxs)("span",{children:[" ",(0,C._T)(lS)]})]})]}),(0,o.jsx)("div",{className:"d-grid gap-2",children:(0,o.jsx)(v.Z,{variant:"success",className:p().Preview,onClick:()=>{lN.id=null==e1?void 0:e1[0].id,e4&&e4(lN)},children:le?(0,o.jsx)("div",{children:(0,o.jsx)(c.Z,{animation:"border"})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"icon-buy"})," Edit"]})})})]})})}):(0,o.jsxs)(r.Z,{activeKey:e6,onSelect:e=>{e!==e6&&e8(e)},id:"uncontrolled-tab-example",className:"",children:[(0,o.jsx)(u.Z,{eventKey:s.buy,title:"Buy",children:(0,o.jsxs)("div",{className:p().buyStrategies,children:[(0,o.jsxs)("div",{className:p().stockDetails,children:[(0,o.jsxs)("div",{className:p().info,children:[(0,o.jsx)("h3",{children:(null===(eh=e1[0])||void 0===eh?void 0:eh.symbol)?null===(eg=e1[0])||void 0===eg?void 0:eg.symbol:"AAPL"}),(0,o.jsxs)("span",{children:["NASDAQ:",(null===(ep=e1[0])||void 0===ep?void 0:ep.symbol)?null===(e_=e1[0])||void 0===e_?void 0:e_.symbol:"NASDAQ"]})]}),(0,o.jsxs)("div",{className:p().priceMain,children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:p().currency,children:"$"}),(0,o.jsx)("span",{className:p().price,children:(null===(em=e1[0])||void 0===em?void 0:em.last)===0?0:(0,N._)(null===(eb=e1[0])||void 0===eb?void 0:eb.last)||"-"})]}),(0,o.jsxs)("span",{className:p().change,children:["$"," ",(null===(ex=e1[0])||void 0===ex?void 0:ex.change)===0?0:(null===(ey=e1[0])||void 0===ey?void 0:ey.change)>0?"+"+(0,N._)(null===(ej=e1[0])||void 0===ej?void 0:ej.change):(0,N._)((null===(ek=e1[0])||void 0===ek?void 0:ek.change)<0&&"-"+(null===(ef=e1[0])||void 0===ef?void 0:ef.change))||"-"," ","(",(null===(eN=e1[0])||void 0===eN?void 0:eN.change_percentage)===0?0:(null===(eC=e1[0])||void 0===eC?void 0:eC.change_percentage)!==null&&(null===(eS=e1[0])||void 0===eS?void 0:eS.change_percentage)+"%"||"-",")",(null===(eD=e1[0])||void 0===eD?void 0:eD.change_percentage)===0||(null===(eT=e1[0])||void 0===eT?void 0:eT.change_percentage)>0?(0,o.jsx)(n(),{src:_.Z,alt:"Up",width:14,height:14}):(0,o.jsx)(n(),{src:m.Z,alt:"Down",width:14,height:14})]})]})]}),(0,o.jsx)("div",{className:p().buySellDetails,children:(0,o.jsxs)("ul",{className:"w-100",children:[(0,o.jsxs)("li",{children:[(0,o.jsx)("strong",{children:"BID "}),(0,o.jsxs)("label",{children:["@",(0,C._T)(null===(eM=e1[0])||void 0===eM?void 0:eM.bid)]})]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("strong",{children:"ASK "}),(0,o.jsxs)("label",{children:["@",(0,C._T)(null===(eZ=e1[0])||void 0===eZ?void 0:eZ.ask)]})]})]})}),(0,o.jsx)(h.Z.Select,{"aria-label":"Default select example",value:lc,onChange:e=>lv(e.target.value),children:lt.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,o.jsx)(h.Z.Select,{"aria-label":"Default select example",value:ln,onChange:lj,children:lo.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),"limit"===ln?(0,o.jsx)(h.Z.Control,{type:"number",placeholder:"Price",className:p().formControl,onChange:e=>lb(e.target.value)}):null,"stop"===ln?(0,o.jsx)(h.Z.Control,{type:"number",placeholder:"Stop",className:p().formControl,onChange:e=>ly(e.target.value)}):null,"stop_limit"===ln?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.Z.Control,{type:"number",placeholder:"Stop",className:p().formControl,onChange:e=>ly(e.target.value)}),(0,o.jsx)(h.Z.Control,{type:"number",placeholder:"Limit",className:p().formControl,onChange:e=>lb(e.target.value)})]}):null,(0,o.jsx)(h.Z.Select,{"aria-label":"Default select example",value:lr,onChange:lk,children:la.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,o.jsxs)(h.Z.Group,{className:"mb-5",controlId:"exampleForm.ControlInput1",children:[(0,o.jsx)(h.Z.Label,{children:"Quantity"}),(0,o.jsx)(h.Z.Control,{type:"number",placeholder:"1","aria-describedby":"cost",value:lp,onChange:e=>l_(e.target.value)}),(0,o.jsxs)(h.Z.Text,{id:"cost",className:p().estimatedCost,children:["Estimated cost: ",(0,o.jsx)("span",{children:(0,C._T)(lS)})]})]}),(0,o.jsx)("div",{className:"d-grid gap-2",children:(0,o.jsx)(v.Z,{variant:"success",className:p().Preview,onClick:lC,children:le?(0,o.jsx)("div",{children:(0,o.jsx)(c.Z,{animation:"border"})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"icon-buy"})," Buy"]})})})]})}),(0,o.jsx)(u.Z,{eventKey:s.sell,title:"Sell",children:(0,o.jsxs)("div",{className:p().buyStrategies,children:[(0,o.jsxs)("div",{className:p().stockDetails,children:[(0,o.jsxs)("div",{className:p().info,children:[(0,o.jsx)("h3",{children:(null===(eE=e1[0])||void 0===eE?void 0:eE.symbol)?null===(eP=e1[0])||void 0===eP?void 0:eP.symbol:"AAPL"}),(0,o.jsxs)("span",{children:["NASDAQ:",(null===(ew=e1[0])||void 0===ew?void 0:ew.symbol)?null===(eB=e1[0])||void 0===eB?void 0:eB.symbol:"NASDAQ"]})]}),(0,o.jsxs)("div",{className:p().priceMain,children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:p().currency,children:"$"}),(0,o.jsx)("span",{className:p().price,children:(null===(eF=e1[0])||void 0===eF?void 0:eF.last)===0?0:(0,N._)(null===(eL=e1[0])||void 0===eL?void 0:eL.last)||"-"})]}),(0,o.jsxs)("span",{className:p().change,children:["$"," ",(null===(eA=e1[0])||void 0===eA?void 0:eA.change)===0?0:(null===(eI=e1[0])||void 0===eI?void 0:eI.change)>0?"+"+(0,N._)(null===(eV=e1[0])||void 0===eV?void 0:eV.change):(0,N._)((null===(eO=e1[0])||void 0===eO?void 0:eO.change)<0&&"-"+(null===(eU=e1[0])||void 0===eU?void 0:eU.change))||"-"," ","(",(null===(eq=e1[0])||void 0===eq?void 0:eq.change_percentage)===0?0:(null===(eQ=e1[0])||void 0===eQ?void 0:eQ.change_percentage)!==null&&(0,N.r)(null===(eR=e1[0])||void 0===eR?void 0:eR.change_percentage)+"%"||"-",")",(null===(eK=e1[0])||void 0===eK?void 0:eK.change_percentage)===0||(null===(e$=e1[0])||void 0===e$?void 0:e$.change_percentage)>0?(0,o.jsx)(n(),{src:_.Z,alt:"Up",width:14,height:14}):(0,o.jsx)(n(),{src:m.Z,alt:"Down",width:14,height:14})]})]})]}),(0,o.jsx)("div",{className:p().buySellDetails,children:(0,o.jsxs)("ul",{className:"w-100",children:[(0,o.jsxs)("li",{children:[(0,o.jsx)("strong",{children:"BID "}),(0,o.jsxs)("label",{children:["@",(0,C._T)(null===(ez=e1[0])||void 0===ez?void 0:ez.bid)]})]}),(0,o.jsxs)("li",{children:[(0,o.jsx)("strong",{children:"ASK "}),(0,o.jsxs)("label",{children:["@",(0,C._T)(null===(eG=e1[0])||void 0===eG?void 0:eG.ask)]})]})]})}),(0,o.jsx)(h.Z.Select,{"aria-label":"Default select example",value:lh,onChange:e=>lg(e.target.value),children:ls.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,o.jsx)(h.Z.Select,{"aria-label":"Default select example",value:ln,onChange:lj,children:lo.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),"limit"===ln?(0,o.jsx)(h.Z.Control,{type:"number",placeholder:"Price",className:p().formControl,onChange:e=>lb(e.target.value)}):null,"stop"===ln?(0,o.jsx)(h.Z.Control,{type:"number",placeholder:"Stop",className:p().formControl,onChange:e=>ly(e.target.value)}):null,"stop_limit"===ln?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.Z.Control,{type:"number",placeholder:"Stop",className:p().formControl,onChange:e=>ly(e.target.value)}),(0,o.jsx)(h.Z.Control,{type:"number",placeholder:"Limit",className:p().formControl,onChange:e=>lb(e.target.value)})]}):null,(0,o.jsx)(h.Z.Select,{"aria-label":"Default select example",value:lr,onChange:lk,children:la.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,o.jsxs)(h.Z.Group,{className:"mb-5",controlId:"exampleForm.ControlInput1",children:[(0,o.jsx)(h.Z.Label,{children:"Quantity"}),(0,o.jsx)(h.Z.Control,{type:"number",placeholder:"1","aria-describedby":"cost",value:lp,onChange:e=>l_(e.target.value)}),(0,o.jsxs)(h.Z.Text,{id:"cost",className:p().estimatedCost,children:["Estimated Proceeds: ",(0,o.jsx)("span",{children:(0,C._T)(lS)})]})]}),(0,o.jsx)("div",{className:"d-grid gap-2",children:(0,o.jsx)(v.Z,{variant:"danger",className:p().Preview,onClick:lC,children:le?(0,o.jsx)("div",{children:(0,o.jsx)(c.Z,{animation:"border"})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"icon-sell"}),"Sell"]})})})]})})]})]})})}},91142:function(e,l,i){"use strict";var t,s;i.d(l,{Z:function(){return o}}),(s=t||(t={}))[s.Call=0]="Call",s[s.Put=1]="Put",s[s.Stock=2]="Stock";class o{getCallOptionValue(e,l,i,t,s){return Math.round((Math.max(e-l,0)-i)*(t*s*100))}getPutOptionValue(e,l,i,t,s){return Math.round((Math.max(l-e,0)-i)*(t*s*100))}getCallBreakEven(e,l,i,t){let s=this.getCallOptionValue(1e6,e,l,i,t),o=this.getCallOptionValue(e,e,l,i,t),a=1e6-s/(s-o)*(1e6-e);return this.roundToDecimal(a,2)}roundToDecimal(e,l){let i=Math.pow(10,l);return Math.round(e*i)/i}getPutBreakEven(e,l,i,t){let s=this.getPutOptionValue(0,e,l,i,t),o=this.getPutOptionValue(e,e,l,i,t),a=e-o/(o-s)*(e-0);return this.roundToDecimal(a,2)}getSingleLegBreakEven(e){let l=e.strike,i=Number(e.size),s=this.roundToDecimal(e.purchasePrice,2);switch(e.type){case t.Call:return this.getCallBreakEven(l,s,Number(e.direction),i);case t.Put:return this.getPutBreakEven(l,s,Number(e.direction),i);case t.Stock:return 0}}getDoubleLegBreakEven(e,l,i){let t=[...e],s=t.sort((e,l)=>e.strike-l.strike),o=this.getTotalOptionValue(s,l),a=this.getTotalOptionValue(s,i);if(Math.sign(o)!==Math.sign(a)){let e=i-a/(a-o)*(i-l);return this.roundToDecimal(e,2)}return 0}getTotalOptionValue(e,l){var i;let s=0;if(null===(i=this.strategy)||void 0===i?void 0:i.legs)for(let i of e){let e=(null==i?void 0:i.strike)||0,o=Number(null==i?void 0:i.size),a=this.roundToDecimal(null==i?void 0:i.purchasePrice,2),n=Number(null==i?void 0:i.direction);switch(null==i?void 0:i.type){case t.Call:s+=this.getCallOptionValue(l,e,a,n,o);break;case t.Put:s+=this.getPutOptionValue(l,e,a,n,o);break;case t.Stock:s+=Math.round((l-i.purchasePrice)*(100*i.direction))}}return s}getStockDoubleLegBreakEven(e,l,i){var s;return(null===(s=e.find(e=>e.type!==t.Stock))||void 0===s?void 0:s.type)===t.Put?this.getDoubleLegBreakEven(e,l,1e6):this.getDoubleLegBreakEven(e,0,i)}getStockTripleLegBreakEven(e){let l="",i=this.getDoubleLegBreakEven(e,0,e[1].strike);0!==i&&(l="".concat(i<0?"- ":"","$").concat(Math.abs(i)));let t=e[1].strike!==e[2].strike?e[2].strike:1e6,s=this.getDoubleLegBreakEven(e,e[1].strike,t);if(0!==s&&(""!==l&&(l+=", "),l+="".concat(s<0?"- ":"","$").concat(Math.abs(s))),0===s&&1e6!==t){let i=this.getDoubleLegBreakEven(e,e[1].strike,1e6);0!==i&&(""!==l&&(l+=", "),l+="".concat(i<0?"- ":"","$").concat(Math.abs(i)))}return""!==l?l:"None"}getTripleLegBreakEven(e){var l,i,t,s,o,a;let n=this.getDoubleLegBreakEven(e,0,null===(l=e[0])||void 0===l?void 0:l.strike),d=this.getBreakEvenString(n,""),r=this.getDoubleLegBreakEven(e,null===(i=e[0])||void 0===i?void 0:i.strike,null===(t=e[1])||void 0===t?void 0:t.strike);d=this.getBreakEvenString(r,d);let u=this.getDoubleLegBreakEven(e,null===(s=e[1])||void 0===s?void 0:s.strike,null===(o=e[2])||void 0===o?void 0:o.strike);d=this.getBreakEvenString(u,d);let c=this.getDoubleLegBreakEven(e,null===(a=e[2])||void 0===a?void 0:a.strike,1e6);return""!==(d=this.getBreakEvenString(c,d))?d:"None"}getQuadLegBreakEven(e){var l,i,t,s,o,a,n,d;let r=[...e].sort((e,l)=>e.strike-l.strike),u=this.getDoubleLegBreakEven(r,0,null===(l=r[0])||void 0===l?void 0:l.strike),c=this.getBreakEvenString(u,""),v=this.getDoubleLegBreakEven(r,null===(i=r[0])||void 0===i?void 0:i.strike,null===(t=r[1])||void 0===t?void 0:t.strike);c=this.getBreakEvenString(v,c);let h=this.getDoubleLegBreakEven(r,null===(s=r[1])||void 0===s?void 0:s.strike,null===(o=r[2])||void 0===o?void 0:o.strike);c=this.getBreakEvenString(h,c);let g=this.getDoubleLegBreakEven(r,null===(a=r[2])||void 0===a?void 0:a.strike,null===(n=r[3])||void 0===n?void 0:n.strike);c=this.getBreakEvenString(g,c);let p=this.getDoubleLegBreakEven(r,null===(d=r[3])||void 0===d?void 0:d.strike,1e6);return""!==(c=this.getBreakEvenString(p,c))?c:"None"}getBreakEvenValue(){var e,l,i,s,o,a,n;if(this.strategy&&(null===(e=this.strategy)||void 0===e?void 0:e.legs)){let e=[...null===(l=this.strategy)||void 0===l?void 0:l.legs],d=[...e],r=d.sort((e,l)=>(e.type===t.Stock&&l.type!==t.Stock?-1:1)&&e.strike-l.strike);switch(null==r?void 0:r.length){case 1:let u=this.getSingleLegBreakEven(r[0]);return"".concat(u<0?"- ":"","$").concat(Math.abs(u));case 2:if(0===r.filter(e=>e.type===t.Stock).length){let e=this.getDoubleLegBreakEven(r,0,null===(i=r[0])||void 0===i?void 0:i.strike),l=this.getBreakEvenString(e,""),t=this.getDoubleLegBreakEven(r,null===(s=r[0])||void 0===s?void 0:s.strike,null===(o=r[1])||void 0===o?void 0:o.strike);l=this.getBreakEvenString(t,l);let n=this.getDoubleLegBreakEven(r,null===(a=r[1])||void 0===a?void 0:a.strike,1e6);return this.getBreakEvenString(n,l)}{let e=this.getStockDoubleLegBreakEven(r,this.strategy.currentPrice,null===(n=r[1])||void 0===n?void 0:n.strike);return"".concat(e<0?"- ":"","$").concat(Math.abs(e))}case 3:if(0!==r.filter(e=>(null==e?void 0:e.type)===t.Stock).length)return this.getStockTripleLegBreakEven(r);{let e=this.getTripleLegBreakEven(r);return e}case 4:let c=this.getQuadLegBreakEven(r);return c;default:return"$0"}}}calculateNetValue(){var e,l;let i=0;if(null===(e=this.strategy)||void 0===e?void 0:e.legs){for(let e of null===(l=this.strategy)||void 0===l?void 0:l.legs)if((null==e?void 0:e.type)!==t.Stock){let l=null==e?void 0:e.purchasePrice,t=Math.round(100*l)/100;i+=-((null==e?void 0:e.direction)*(null==e?void 0:e.size)*100*(t||0))}let e="Net Credit";return i<0&&(e="Net Debit"),{title:e,value:Math.round(i)}}}getBreakEvenString(e,l){return 0!==e&&(""!==l&&(l+=", "),l+="".concat(e<0?"- ":"","$").concat(Math.abs(e))),l}getMinMaxProfit(){return this.calculateLossProfit()}withCommas(e){let l=new Intl.NumberFormat;return l.format(e)}getMinMaxValue(e,l,i){let t=this.getTotalOptionValue(e,l);if(l<1e6)return t;let s=this.getTotalOptionValue(e,1000003),o=this.getTotalOptionValue(e,1000004);return s===o?t:null!=i?i:0}getLegsOptionValues(e,l){var i,t,s;let o=[];return(null==e?void 0:e.length)>0&&o.push(this.getMinMaxValue(e,e[0].strike,l)),(null==e?void 0:e.length)>1&&o.push(this.getMinMaxValue(e,null===(i=e[1])||void 0===i?void 0:i.strike,o[o.length-1])),(null==e?void 0:e.length)>2&&o.push(this.getMinMaxValue(e,null===(t=e[2])||void 0===t?void 0:t.strike,o[o.length-1])),(null==e?void 0:e.length)>3&&o.push(this.getMinMaxValue(e,null===(s=e[3])||void 0===s?void 0:s.strike,o[o.length-1])),o}calculateLossProfit(){if(this.strategy){var e;let l=null===(e=this.strategy)||void 0===e?void 0:e.legs,i=[];i.push(this.getMinMaxValue(l,0,null)),i.push(...this.getLegsOptionValues(l,i[i.length-1])),i.push(this.getMinMaxValue(l,1e6,i[i.length-1])),i.push(this.getMinMaxValue(l,1000001,i[i.length-1])),i.push(this.getMinMaxValue(l,1000002,i[i.length-1]));let t=this.getTotalOptionValue(l,1000003),s=this.getTotalOptionValue(l,1000004);i.push(this.getMinMaxValue(l,1000003,i[i.length-1])),i.push(this.getMinMaxValue(l,1000004,i[i.length-1]));let o=Math.min(...i),a=this.withCommas(o).replace(".00",".0");if(t!==s&&s<0&&(a="Infinite"),s>0&&s!==t)return{min:a,max:"Infinite"};let n=Math.max(...i),d=this.withCommas(n);return{min:a,max:d}}}constructor(e){this.strategy=e}}},72261:function(e,l,i){"use strict";i.d(l,{Z:function(){return a}});var t,s,o=i(16785);function a(e,l,i,t,s,a,n,d,r,u,c){var v,h,g;let p=o.h.getState().optionGreek,_=[];if((null==p?void 0:null===(v=p.entities)||void 0===v?void 0:v.length)>0){let o=null==p?void 0:null===(h=p.entities)||void 0===h?void 0:h.filter(e=>e.option_type===i);o.forEach(e=>{let l=e.strike;_.push(l)});let a=Math.min(..._.filter(l=>l>=e)),n=null==o?void 0:o.find(e=>e.strike===a),u=(null==n?void 0:null===(g=n.greeks)||void 0===g?void 0:g.mid_iv)*100,v=((null==n?void 0:n.ask)+(null==n?void 0:n.bid))/2,m=null==n?void 0:n.expiration_date,b=new Date(m),x=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds());if(x.setHours(16,0,0,0),"custom"===s)return isNaN(r),{strategyId:1,ticker:null==n?void 0:n.root_symbol,currentPrice:e,purchasePrice:d,interestRate:0,dividend:0,createdDateTime:new Date,legs:c,name:s,shareURL:"",sortOrder:1,quoteDescription:null==n?void 0:n.description,changePercentage:0};{let i={strike:null==n?void 0:n.strike,size:1,actualQualtity:1===t?1:-1,purchasePrice:v,direction:t,type:l,expiration:x,symbol:null==n?void 0:n.symbol,volatility:isNaN(u)?0:u,range:1,indexOfStrikePrice:1,index:0,y:0};return{strategyId:1,ticker:null==n?void 0:n.root_symbol,currentPrice:e,purchasePrice:v,interestRate:0,dividend:0,createdDateTime:new Date,legs:[i],name:s,shareURL:"",sortOrder:1,quoteDescription:null==n?void 0:n.description,changePercentage:0}}}}(t=s||(s={}))[t.Bid=0]="Bid",t[t.Mid=1]="Mid",t[t.Ask=1]="Ask"},59683:function(e){e.exports={strategies:"strategies_strategies__Dqafm",searchSidebar:"strategies_searchSidebar__OyeTT",seachForm:"strategies_seachForm___TzfW",searchIcon:"strategies_searchIcon__hTyal",strategiesList:"strategies_strategiesList__t3uEK",optionHeader:"strategies_optionHeader____ihX",leftHead:"strategies_leftHead__9_UNN",rightBtn:"strategies_rightBtn__snDmM",chartMain:"strategies_chartMain__ZIuj1",strategiesTable:"strategies_strategiesTable__ikPKR",nobg:"strategies_nobg__k5Z5Q",lightbg:"strategies_lightbg__uQuaP",lightred:"strategies_lightred__zj4VK",lightred2:"strategies_lightred2__MyRap",lightred3:"strategies_lightred3__GYlVc",lightgreen:"strategies_lightgreen__a06hW",lightgreen2:"strategies_lightgreen2___8LwX",lightgreen3:"strategies_lightgreen3__3QEhI",lightgreen4:"strategies_lightgreen4__W3_5V",lightgreen5:"strategies_lightgreen5__e6j3B",lightgreen6:"strategies_lightgreen6__oILQS",sucessmsg:"strategies_sucessmsg__QRr9p",greekValue:"strategies_greekValue__VpvPx",stockContainer:"strategies_stockContainer__o24w_",tabsAlert:"strategies_tabsAlert__p33LM",btnGroup:"strategies_btnGroup___IDhl",labelValue:"strategies_labelValue__4KdN2",buyStrategies:"strategies_buyStrategies__KcsUe",stockDetails:"strategies_stockDetails__rE0Z8",info:"strategies_info__F6zzL",priceMain:"strategies_priceMain__rG0DO",currency:"strategies_currency__QYOQW",price:"strategies_price__XTRow",change:"strategies_change__tZmkN",estimatedCost:"strategies_estimatedCost__Pwmua",additional:"strategies_additional__Cc8RG",Preview:"strategies_Preview__CpUo3",TableContainer:"strategies_TableContainer__Jy00m",header:"strategies_header__xgNws",StrategiesTable:"strategies_StrategiesTable__Mj9Pd",buyStrategiesPopup:"strategies_buyStrategiesPopup__gtwF1",legInfo:"strategies_legInfo__PJLvO",legListing:"strategies_legListing__zteT8",expiration:"strategies_expiration__8sEdM",strike:"strategies_strike__EisEa",type:"strategies_type__joYYq",side:"strategies_side__ceigP",quantity:"strategies_quantity__AlZku",trade:"strategies_trade__vYmV4",Infodetails:"strategies_Infodetails__P_2Li",legDetails:"strategies_legDetails__yQ8vH",buySell:"strategies_buySell__RyPI9",stockPrice:"strategies_stockPrice__fZhm7",totalPrice:"strategies_totalPrice__iPmft",action:"strategies_action__ppnSV",orderNetQuote:"strategies_orderNetQuote__VxXX1",strategiesPage:"strategies_strategiesPage__Vvn36",strategiesContainer:"strategies_strategiesContainer__CGDCw",formControl:"strategies_formControl__bOF8x",knowmore:"strategies_knowmore__nvTDI",knowmore_header:"strategies_knowmore_header__NnDtP",knowmore_body:"strategies_knowmore_body__Uc1aP",knwoImage:"strategies_knwoImage__PZOeM",breakeven:"strategies_breakeven__EgkCz",sweetspot:"strategies_sweetspot__AGrT2",maxprofit:"strategies_maxprofit__mvJjm",maxloss:"strategies_maxloss__Te3Q9",alias:"strategies_alias__Y1aLx",Columns:"strategies_Columns__p1EuE","dropdown-menu":"strategies_dropdown-menu__tZg6z",strategiesDetails:"strategies_strategiesDetails__ZQz3_",buySellDetails:"strategies_buySellDetails__9KQTT",letterLogoContainer:"strategies_letterLogoContainer__IosPG",letterLogo:"strategies_letterLogo__G1gia"}},8203:function(e,l){"use strict";l.Z={src:"/_next/static/media/down.db90b35c.svg",height:18,width:18,blurWidth:0,blurHeight:0}},34954:function(e,l){"use strict";l.Z={src:"/_next/static/media/up.ba73408a.svg",height:18,width:18,blurWidth:0,blurHeight:0}}}]);